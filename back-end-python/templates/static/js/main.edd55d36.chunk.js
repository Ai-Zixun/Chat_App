(window["webpackJsonpfront-end-react"]=window["webpackJsonpfront-end-react"]||[]).push([[0],{101:function(e,a,t){},109:function(e,a,t){},171:function(e,a,t){},186:function(e,a,t){},187:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(15),c=t.n(s),o=(t(81),t(6)),l=(t(82),t(9)),m=t.n(l),i=t(16),u=t(195),p=t(189),d=t(10),h=t.n(d),g="http://127.0.0.1:5000",f=t(196),E=(t(101),function(e){if("null"===e.alert)return null;var a="";switch(e.alert){case"user-exist":a="The username is taken!";break;case"user-not-exist":a="The user does not exist!";break;case"username-format":a="Username should be 1 to 10 characters of letter and number combination!";break;case"password-not-match":a="Please enter the same password again!";break;case"password-format":a="Password should be 5 to 15 characters of letter and number combination!";break;case"password-wrong":a="Incorrect Password!";break;case"email-format":a="Please enter the email with correct format!";break;case"syste-error":a="Sorry, We are trying to fix our server"}return r.a.createElement(f.a,{className:"Signup-Form-Alert",key:0,variant:"danger"},a)}),b=t(30),v=t.n(b),x=(t(109),function(e){var a=Object(n.useState)("null"),t=Object(o.a)(a,2),s=t[0],c=t[1],l=Object(n.useState)(""),d=Object(o.a)(l,2),f=d[0],b=d[1],x=Object(n.useState)(""),N=Object(o.a)(x,2),k=N[0],w=N[1],O=function(){var a=Object(i.a)(m.a.mark(function a(){var t,n;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("Clicked"),a.next=3,h.a.get(g+"/api/user_exist",{params:{user_name:f}});case 3:if(a.sent.data.exist){a.next=8;break}c("user-not-exist"),a.next=12;break;case 8:return a.next=10,h.a.get(g+"/api/login",{params:{user_name:f,user_password:k}});case 10:(t=a.sent).data.success?(c("null"),n=t.data.user_id,e.setID(n),e.setPage("chatroom")):c("password-wrong");case 12:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:v.a,className:"App-logo",alt:"logo"}),r.a.createElement(u.a,{className:"Login-Form"},r.a.createElement(E,{alert:s}),r.a.createElement(u.a.Group,null,r.a.createElement(u.a.Control,{className:"Login-Form-Text",onChange:function(e){return b(e.target.value)},type:"text",placeholder:"Enter Username"}),r.a.createElement(u.a.Control,{className:"Login-Form-Text",onChange:function(e){return w(e.target.value)},type:"password",placeholder:"Enter Password"})),r.a.createElement(p.a,{onClick:O,className:"Login-Form-Button",variant:"outline-success"},"Sign In"),r.a.createElement(p.a,{onClick:function(){e.setPage("createAccount")},className:"Login-Form-Button",variant:"outline-success"},"Create Account"))))}),N=t(23),k=t.n(N),w=(t(171),function(e){var a=Object(n.useState)("null"),t=Object(o.a)(a,2),s=t[0],c=t[1],l=Object(n.useState)(""),d=Object(o.a)(l,2),f=d[0],b=d[1],x=Object(n.useState)(""),N=Object(o.a)(x,2),w=N[0],O=N[1],j=Object(n.useState)(""),C=Object(o.a)(j,2),_=C[0],S=C[1],T=Object(n.useState)(""),y=Object(o.a)(T,2),I=y[0],P=y[1],A=function(){var a=Object(i.a)(m.a.mark(function a(){var t,n,r;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("Clicked"),a.next=3,h.a.get(g+"/api/user_exist",{params:{user_name:f}});case 3:if(t=a.sent,k.a.matches(f,/^[a-zA-Z0-9]{1,10}$/)){a.next=8;break}c("username-format"),a.next=28;break;case 8:if(!t.data.exist){a.next=12;break}c("user-exist"),a.next=28;break;case 12:if(k.a.matches(w,/^[a-zA-Z0-9]{5,15}$/)){a.next=16;break}c("password-format"),a.next=28;break;case 16:if(_===w){a.next=20;break}c("password-not-match"),a.next=28;break;case 20:if(k.a.isEmail(I)){a.next=24;break}c("email-format"),a.next=28;break;case 24:return a.next=26,h.a.get(g+"/api/create_user",{params:{user_name:f,user_password:w}});case 26:(n=a.sent).data.success?(c("null"),r=n.data.user_id,console.log(r),e.setID(r),e.setPage("chatroom")):c("syste-error");case 28:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:v.a,className:"App-logo",alt:"logo"}),r.a.createElement(u.a,{className:"Signup-Form"},r.a.createElement(E,{alert:s}),r.a.createElement(u.a.Group,null,r.a.createElement(u.a.Control,{className:"Signup-Form-Text",onChange:function(e){return b(e.target.value)},type:"text",placeholder:"Enter Username"}),r.a.createElement(u.a.Control,{className:"Signup-Form-Text",onChange:function(e){return O(e.target.value)},type:"password",placeholder:"Enter Password"}),r.a.createElement(u.a.Control,{className:"Signup-Form-Text",onChange:function(e){return S(e.target.value)},type:"password",placeholder:"Confirm Password"}),r.a.createElement(u.a.Control,{className:"Signup-Form-Text",onChange:function(e){return P(e.target.value)},type:"email",placeholder:"Enter E-Mail"})),r.a.createElement(p.a,{onClick:A,className:"Signup-Form-Button",variant:"outline-success"},"Sign Up"),r.a.createElement("p",{className:"Text"},"Have an account? ",r.a.createElement("a",{id:"Link",onClick:function(){e.setPage("login")}},"Sign In")))))}),O=t(190),j=t(191),C=t(74),_=t(192),S=t(193),T=t(73),y=t(194),I=function(e){var a="",t=Object(n.useState)(""),s=Object(o.a)(t,2),c=s[0],l=s[1],d=function(){var e=Object(i.a)(m.a.mark(function e(a){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get(g+"/api/chatroom_roomname_exist",{params:{roomname:a}});case 2:return t=e.sent,e.abrupt("return",t.data.exist);case 4:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),E=function(){var e=Object(i.a)(m.a.mark(function e(t){var n,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(k.a.matches(a,/^[a-zA-Z0-9]{1,10}$/)){e.next=4;break}l("Illegal Chatroom Name: Please use 1 to 10 characters of letter and number combination!"),e.next=17;break;case 4:return e.next=6,d(a);case 6:if(!e.sent){e.next=10;break}l("Illegal Chatroom Name: The chatroom name has been taken!"),e.next=17;break;case 10:return e.next=12,h.a.get(g+"/api/chatroom_create",{params:{roomname:a}});case 12:n=e.sent,r=n.data.chatroom_id,console.log(r),t(r),l("");case 17:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(y.a,Object.assign({},e,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),r.a.createElement(y.a.Header,{closeButton:!0},r.a.createElement(y.a.Title,{id:"contained-modal-title-vcenter"},"Create New Chatroom")),r.a.createElement(y.a.Body,null,r.a.createElement(u.a,null,r.a.createElement(u.a.Group,null,r.a.createElement(u.a.Control,{type:"text",placeholder:"Chatroom Name",onChange:function(e){a=e.target.value}})),r.a.createElement(u.a.Group,null,""===c?null:r.a.createElement(f.a,{variant:"danger"},c)))),r.a.createElement(y.a.Footer,null,r.a.createElement(p.a,{onClick:function(){E(e.setRoom),e.onHide()}},"Create")))},P=(t(186),function(e){var a=r.a.useState(),t=Object(o.a)(a,2)[1],s=r.a.useCallback(function(){return t({})},[]),c=Object(n.useState)([]),l=Object(o.a)(c,2),u=l[0],d=l[1],f=Object(n.useState)([]),E=Object(o.a)(f,2),b=E[0],v=E[1],x=Object(n.useState)(""),N=Object(o.a)(x,2),k=N[0],w=N[1],y=r.a.useState(!1),P=Object(o.a)(y,2),A=P[0],F=P[1];Object(n.useEffect)(Object(i.a)(m.a.mark(function a(){return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,void h.a.get(g+"/api/user_by_id",{params:{user_id:e.id}}).then(function(e){w(e.data.username),console.log(k)});case 2:h.a.get(g+"/api/chatroom_list").then(function(e){var a=e.data[0];d(e.data),h.a.get(g+"/api/chatroom_messages",{params:{chatroom_id:a.chatroom_id}}).then(function(e){v(e.data)})});case 3:case"end":return a.stop()}},a)})),[]);var B=function(e){for(var a=u,t=-1,n=0;n<a.length;n++)u[n].chatroom_id===e&&(t=n);a.splice(0,0,a.splice(t,1)[0]),h.a.get(g+"/api/chatroom_messages",{params:{chatroom_id:a[0].chatroom_id}}).then(function(e){v(e.data)}),d(a),s()};return r.a.createElement("div",{className:"Chatroom"},r.a.createElement(O.a,null,r.a.createElement(j.a,{className:"Top"},r.a.createElement(C.a,{xs:4,className:"TopLeft"},r.a.createElement("p",{className:"TopLeftText"},"Chatrooms")),r.a.createElement(C.a,{xs:2,className:"TopRightEmpty"}),r.a.createElement(C.a,{xs:4,className:"TopRightLabel"},r.a.createElement("p",{className:"TopRightText"},0===u.length?null:u[0].chatroom_name)),r.a.createElement(C.a,{xs:2,className:"TopRightRight"},r.a.createElement("p",{className:"TopRightSignedIn"},"Signed in as: ",k),r.a.createElement(p.a,{className:"TopRightButton",variant:"light"},"Sign out"))),r.a.createElement(j.a,{className:"Bottom"},r.a.createElement(C.a,{xs:4,className:"BottomLeft"},r.a.createElement("div",{className:"ChatroomTag"},r.a.createElement("hr",null),function(){if(u.length>=1){var e=[];return e.push(r.a.createElement("div",null,r.a.createElement("p",{className:"TagSelected",onClick:function(){return B(u[0].chatroom_id)}},u[0].chatroom_name),r.a.createElement("hr",null))),u.slice(1,u.length).forEach(function(a){e.push(r.a.createElement("div",null,r.a.createElement("p",{className:"Tag",onClick:function(){return B(a.chatroom_id)}},a.chatroom_name),r.a.createElement("hr",null)))}),e}}()),r.a.createElement(_.a,null,r.a.createElement(p.a,{variant:"outline-success",onClick:function(){return F(!0)}},"New Chatroom"),r.a.createElement(I,{setRoom:B,show:A,onHide:function(){return F(!1)}}))),r.a.createElement(C.a,{xs:8,className:"BottomRight"},r.a.createElement("div",{className:"Textbox",id:"DisplayedMessage"},function(){var e=[];return b.forEach(function(a){a.user_name===k?e.push(r.a.createElement("div",{className:"FromUser"},r.a.createElement("div",null,r.a.createElement("span",{className:"MessageUser"},a.user_name),r.a.createElement("span",{className:"MessageDate"},a.created_date)),r.a.createElement("div",null,r.a.createElement("span",{className:"MessageTextUser"},a.message)))):e.push(r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("span",{className:"MessageUser"},a.user_name),r.a.createElement("span",{className:"MessageDate"},a.created_date)),r.a.createElement("div",null,r.a.createElement("span",{className:"MessageTextOther"},a.message))))}),e}()),r.a.createElement("div",{className:"TextInput"},r.a.createElement(S.a,{className:"mb-3 Input"},r.a.createElement(T.a,{className:"Input",placeholder:"Message","aria-label":"Recipient's username","aria-describedby":"basic-addon2"}),r.a.createElement(S.a.Append,null,r.a.createElement(p.a,{variant:"outline-success"},"Send"))))))))});var A=function(){var e=Object(n.useState)("chatroom"),a=Object(o.a)(e,2),t=a[0],s=a[1],c=Object(n.useState)(0),l=Object(o.a)(c,2),m=l[0],i=l[1];return r.a.createElement("div",null,function(){switch(t){case"login":return r.a.createElement(x,{setPage:s,setID:i});case"createAccount":return r.a.createElement(w,{setPage:s,setID:i});case"chatroom":return r.a.createElement(P,{setPage:s,id:m,setID:i});default:return r.a.createElement(x,{setPage:s,setID:i})}}())};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},30:function(e,a,t){e.exports=t.p+"static/media/logo.86ea0319.svg"},76:function(e,a,t){e.exports=t(187)},81:function(e,a,t){},82:function(e,a,t){}},[[76,1,2]]]);
//# sourceMappingURL=main.edd55d36.chunk.js.map